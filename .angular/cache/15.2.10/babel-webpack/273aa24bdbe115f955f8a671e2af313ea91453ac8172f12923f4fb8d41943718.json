{"ast":null,"code":"import { map, switchMap } from 'rxjs/operators';\nimport { GET_ALL_USERS_DTO_PORT } from '../ports/secondary/dto/get-all-users.dto-port';\nimport { GET_ONE_USER_DTO_PORT } from '../ports/secondary/dto/get-one-user.dto-port';\nimport { PATCH_USER_CONTEXT_PORT } from '../ports/secondary/context/patch-user.context-port';\nimport { SELECT_USER_CONTEXT_PORT } from '../ports/secondary/context/select-user.context-port';\nimport { UserQuery } from '../ports/primary/query/user.query';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport class UserAlbumsState {\n  constructor(_getAllUsersDtoPort, _getOneUserDtoPort, _patchUserContextPort, _selectUserContextPort, activatedRoute) {\n    this._getAllUsersDtoPort = _getAllUsersDtoPort;\n    this._getOneUserDtoPort = _getOneUserDtoPort;\n    this._patchUserContextPort = _patchUserContextPort;\n    this._selectUserContextPort = _selectUserContextPort;\n    this.activatedRoute = activatedRoute;\n  }\n  getAllUsers() {\n    return this._getAllUsersDtoPort.getAllUsers().pipe(map(allUsers => allUsers.map(user => new UserQuery(user.id, this.getAvatar(), user.name, user.username, user.email, this.getAddress(user), user.phone, user.website, user.company.name))));\n  }\n  getAddress(user) {\n    return `${user.address.street},${user.address.zipcode},${user.address.city},`;\n  }\n  getAvatar() {\n    return 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Angular_full_color_logo.svg/512px-Angular_full_color_logo.svg.png';\n  }\n  getUserDetails() {\n    return this.activatedRoute.params.pipe(switchMap(params => this._getOneUserDtoPort.getOneUser(params['userId'])), map(user => new UserQuery(user.id, this.getAvatar(), user.name, user.username, user.email, this.getAddress(user), user.phone, user.website, user.company.name)));\n  }\n  static #_ = this.ɵfac = function UserAlbumsState_Factory(t) {\n    return new (t || UserAlbumsState)(i0.ɵɵinject(GET_ALL_USERS_DTO_PORT), i0.ɵɵinject(GET_ONE_USER_DTO_PORT), i0.ɵɵinject(PATCH_USER_CONTEXT_PORT), i0.ɵɵinject(SELECT_USER_CONTEXT_PORT), i0.ɵɵinject(i1.ActivatedRoute));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: UserAlbumsState,\n    factory: UserAlbumsState.ɵfac\n  });\n}","map":{"version":3,"mappings":"AAGA,SAAQA,GAAG,EAAEC,SAAS,QAAO,gBAAgB;AAG7C,SAAQC,sBAAsB,QAA4B,+CAA+C;AACzG,SAAQC,qBAAqB,QAA2B,8CAA8C;AACtG,SAAQC,uBAAuB,QAA8B,oDAAoD;AACjH,SAAQC,wBAAwB,QAA+B,qDAAqD;AACpH,SAAQC,SAAS,QAAO,mCAAmC;;;AAI3D,OAAM,MAAOC,eAAe;EAG1BC,YAEUC,mBAAuC,EAEvCC,kBAAqC,EAErCC,qBAA2C,EAE3CC,sBAA6C,EAC7CC,cAA8B;IAP9B,wBAAmB,GAAnBJ,mBAAmB;IAEnB,uBAAkB,GAAlBC,kBAAkB;IAElB,0BAAqB,GAArBC,qBAAqB;IAErB,2BAAsB,GAAtBC,sBAAsB;IACtB,mBAAc,GAAdC,cAAc;EACrB;EAEHC,WAAW;IACT,OAAO,IAAI,CAACL,mBAAmB,CAC5BK,WAAW,EAAE,CACbC,IAAI,CACHf,GAAG,CAAEgB,QAAQ,IACXA,QAAQ,CAAChB,GAAG,CACTiB,IAAI,IACH,IAAIX,SAAS,CACXW,IAAI,CAACC,EAAE,EACP,IAAI,CAACC,SAAS,EAAE,EAChBF,IAAI,CAACG,IAAI,EACTH,IAAI,CAACI,QAAQ,EACbJ,IAAI,CAACK,KAAK,EACV,IAAI,CAACC,UAAU,CAACN,IAAI,CAAC,EACrBA,IAAI,CAACO,KAAK,EACVP,IAAI,CAACQ,OAAO,EACZR,IAAI,CAACS,OAAO,CAACN,IAAI,CAClB,CACJ,CACF,CACF;EACL;EAEQG,UAAU,CAACN,IAAa;IAC9B,OAAO,GAAGA,IAAI,CAACU,OAAO,CAACC,MAAM,IAAIX,IAAI,CAACU,OAAO,CAACE,OAAO,IAAIZ,IAAI,CAACU,OAAO,CAACG,IAAI,GAAG;EAC/E;EAEQX,SAAS;IACf,OAAO,6HAA6H;EACtI;EAEAY,cAAc;IACZ,OAAO,IAAI,CAAClB,cAAc,CAACmB,MAAM,CAACjB,IAAI,CACpCd,SAAS,CAAE+B,MAAc,IACvB,IAAI,CAACtB,kBAAkB,CAACuB,UAAU,CAACD,MAAM,CAAC,QAAQ,CAAC,CAAC,CACrD,EACDhC,GAAG,CACAiB,IAAI,IACH,IAAIX,SAAS,CACXW,IAAI,CAACC,EAAE,EACP,IAAI,CAACC,SAAS,EAAE,EAChBF,IAAI,CAACG,IAAI,EACTH,IAAI,CAACI,QAAQ,EACbJ,IAAI,CAACK,KAAK,EACV,IAAI,CAACC,UAAU,CAACN,IAAI,CAAC,EACrBA,IAAI,CAACO,KAAK,EACVP,IAAI,CAACQ,OAAO,EACZR,IAAI,CAACS,OAAO,CAACN,IAAI,CAClB,CACJ,CACF;EACH;EAAC;qBAlEUb,eAAe,cAIhBL,sBAAsB,eAEtBC,qBAAqB,eAErBC,uBAAuB,eAEvBC,wBAAwB;EAAA;EAAA;WAVvBE,eAAe;IAAA2B,SAAf3B,eAAe;EAAA","names":["map","switchMap","GET_ALL_USERS_DTO_PORT","GET_ONE_USER_DTO_PORT","PATCH_USER_CONTEXT_PORT","SELECT_USER_CONTEXT_PORT","UserQuery","UserAlbumsState","constructor","_getAllUsersDtoPort","_getOneUserDtoPort","_patchUserContextPort","_selectUserContextPort","activatedRoute","getAllUsers","pipe","allUsers","user","id","getAvatar","name","username","email","getAddress","phone","website","company","address","street","zipcode","city","getUserDetails","params","getOneUser","factory"],"sourceRoot":"","sources":["E:\\WORK\\task\\projects\\user-albums\\src\\lib\\application\\state\\user-albums.state.ts"],"sourcesContent":["import {Inject, Injectable} from '@angular/core';\nimport {ActivatedRoute, Params} from '@angular/router';\nimport {Observable} from 'rxjs';\nimport {map, switchMap} from 'rxjs/operators';\nimport {GetAllUsersQueryPort} from '../ports/primary/query/get-all-users.query-port';\nimport {GetUserDetailsQueryPort} from '../ports/primary/query/get-user-details.query-port';\nimport {GET_ALL_USERS_DTO_PORT, GetAllUsersDtoPort,} from '../ports/secondary/dto/get-all-users.dto-port';\nimport {GET_ONE_USER_DTO_PORT, GetOneUserDtoPort,} from '../ports/secondary/dto/get-one-user.dto-port';\nimport {PATCH_USER_CONTEXT_PORT, PatchUserContextPort,} from '../ports/secondary/context/patch-user.context-port';\nimport {SELECT_USER_CONTEXT_PORT, SelectUserContextPort,} from '../ports/secondary/context/select-user.context-port';\nimport {UserQuery} from '../ports/primary/query/user.query';\nimport {UserDTO} from '../ports/secondary/dto/user.dto';\n\n@Injectable()\nexport class UserAlbumsState\n  implements GetAllUsersQueryPort, GetUserDetailsQueryPort\n{\n  constructor(\n    @Inject(GET_ALL_USERS_DTO_PORT)\n    private _getAllUsersDtoPort: GetAllUsersDtoPort,\n    @Inject(GET_ONE_USER_DTO_PORT)\n    private _getOneUserDtoPort: GetOneUserDtoPort,\n    @Inject(PATCH_USER_CONTEXT_PORT)\n    private _patchUserContextPort: PatchUserContextPort,\n    @Inject(SELECT_USER_CONTEXT_PORT)\n    private _selectUserContextPort: SelectUserContextPort,\n    private activatedRoute: ActivatedRoute\n  ) {}\n\n  getAllUsers(): Observable<UserQuery[]> {\n    return this._getAllUsersDtoPort\n      .getAllUsers()\n      .pipe(\n        map((allUsers) =>\n          allUsers.map(\n            (user) =>\n              new UserQuery(\n                user.id,\n                this.getAvatar(),\n                user.name,\n                user.username,\n                user.email,\n                this.getAddress(user),\n                user.phone,\n                user.website,\n                user.company.name\n              )\n          )\n        )\n      );\n  }\n\n  private getAddress(user: UserDTO) {\n    return `${user.address.street},${user.address.zipcode},${user.address.city},`;\n  }\n\n  private getAvatar() {\n    return 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Angular_full_color_logo.svg/512px-Angular_full_color_logo.svg.png';\n  }\n\n  getUserDetails(): Observable<UserQuery> {\n    return this.activatedRoute.params.pipe(\n      switchMap((params: Params) =>\n        this._getOneUserDtoPort.getOneUser(params['userId'])\n      ),\n      map(\n        (user) =>\n          new UserQuery(\n            user.id,\n            this.getAvatar(),\n            user.name,\n            user.username,\n            user.email,\n            this.getAddress(user),\n            user.phone,\n            user.website,\n            user.company.name\n          )\n      )\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}